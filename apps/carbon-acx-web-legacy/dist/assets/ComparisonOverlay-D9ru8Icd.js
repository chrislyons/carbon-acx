import{c as N,g as k}from"./NewApp-BqazA668.js";import{r as t,j as e}from"./index-CmW8Jgfs.js";import{i as g,c as R,d as C}from"./DataUniverseWrapper-CxOdPet-.js";/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=N("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=N("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]),E=t.forwardRef(({baseline:c,comparison:n,height:m="400px",orientation:x="horizontal",showDifference:y=!0,theme:f,loading:h=!1,className:b},z)=>{const u=t.useRef(null),d=t.useRef(null),l=t.useRef(null),o=t.useRef(null),v=t.useMemo(()=>f||(typeof window<"u"&&(document.documentElement.dataset.theme==="dark"||document.documentElement.classList.contains("dark"))?"dark":"light"),[f]);t.useEffect(()=>{if(!u.current||!d.current)return;const r=g(u.current,v,{renderer:"canvas"}),a=g(d.current,v,{renderer:"canvas"});l.current=r,o.current=a;const s="comparison-overlay-group";return r.group=s,a.group=s,R(s),()=>{C(s),r.dispose(),a.dispose(),l.current=null,o.current=null}},[v]),t.useEffect(()=>{!l.current||!o.current||(l.current.setOption(c.option),o.current.setOption(n.option))},[c.option,n.option]),t.useEffect(()=>{!l.current||!o.current||(h?(l.current.showLoading(),o.current.showLoading()):(l.current.hideLoading(),o.current.hideLoading()))},[h]),t.useEffect(()=>{const r=()=>{var p,j;(p=l.current)==null||p.resize(),(j=o.current)==null||j.resize()};window.addEventListener("resize",r);const a=new ResizeObserver(r),s=new ResizeObserver(r);return u.current&&a.observe(u.current),d.current&&s.observe(d.current),()=>{window.removeEventListener("resize",r),a.disconnect(),s.disconnect()}},[]);const i=t.useMemo(()=>{if(!y||!c.summary||!n.summary||n.summary.change===void 0)return null;const r=n.summary.change,a=r>0,s=r===0;return{change:r,isPositive:a,isNeutral:s,label:s?"No change":`${a?"+":""}${r.toFixed(1)}%`,color:s?"var(--carbon-neutral)":a?"var(--carbon-high)":"var(--carbon-low)"}},[c.summary,n.summary,y]),w=t.useMemo(()=>({height:typeof m=="number"?`${m}px`:m}),[m]);return e.jsxs("div",{ref:z,className:k("relative flex",x==="horizontal"?"flex-row gap-4":"flex-col gap-6",b),style:w,children:[e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h3",{className:"text-[var(--font-size-lg)] font-semibold text-[var(--text-primary)]",children:c.label}),c.summary&&e.jsxs("p",{className:"text-[var(--font-size-2xl)] font-bold text-[var(--text-primary)] mt-1",children:[c.summary.value.toLocaleString()," ",c.summary.unit]})]}),e.jsx("div",{ref:u,className:"flex-1"})]}),i&&x==="horizontal"&&e.jsx("div",{className:"flex items-center justify-center px-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-[var(--font-size-3xl)] font-bold",style:{color:i.color},children:i.label}),e.jsx("div",{className:"text-[var(--font-size-xs)] text-[var(--text-tertiary)] uppercase mt-1",children:"Change"})]})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h3",{className:"text-[var(--font-size-lg)] font-semibold text-[var(--text-primary)]",children:n.label}),n.summary&&e.jsxs("p",{className:"text-[var(--font-size-2xl)] font-bold text-[var(--text-primary)] mt-1",children:[n.summary.value.toLocaleString()," ",n.summary.unit]})]}),e.jsx("div",{ref:d,className:"flex-1"})]}),i&&x==="vertical"&&e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-[var(--font-size-3xl)] font-bold",style:{color:i.color},children:i.label}),e.jsx("div",{className:"text-[var(--font-size-xs)] text-[var(--text-tertiary)] uppercase mt-1",children:"Change"})]})})]})});E.displayName="ComparisonOverlay";export{E as C,D,I as G};
