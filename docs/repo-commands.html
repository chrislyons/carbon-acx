<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carbon ACX - Command Reference</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #1a1a1a;
            color: #e0e0e0;
            padding: 2rem;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #fff;
        }

        .subtitle {
            color: #888;
            margin-bottom: 2rem;
            font-size: 0.9rem;
        }

        .last-updated {
            color: #666;
            font-size: 0.85rem;
            margin-bottom: 2rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: #242424;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        thead {
            background: #2a2a2a;
        }

        th {
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: #fff;
            border-bottom: 2px solid #333;
        }

        th:nth-child(1) { width: 20%; }
        th:nth-child(2) { width: 35%; }
        th:nth-child(3) { width: 45%; }

        td {
            padding: 1rem;
            border-bottom: 1px solid #2a2a2a;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: #2a2a2a;
        }

        .command {
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Courier New', monospace;
            background: #1a1a1a;
            padding: 0.5rem 0.75rem;
            border-radius: 4px;
            font-size: 0.9rem;
            color: #4fc3f7;
            cursor: pointer;
            display: inline-block;
            transition: background 0.2s;
            position: relative;
        }

        .command:hover {
            background: #222;
        }

        .command:active {
            background: #2a4858;
        }

        .command::after {
            content: 'üìã';
            margin-left: 0.5rem;
            opacity: 0.5;
        }

        .copied {
            animation: flash 0.3s;
        }

        @keyframes flash {
            0%, 100% { background: #1a1a1a; }
            50% { background: #2a5a3a; }
        }

        .description {
            color: #b0b0b0;
            font-size: 0.9rem;
        }

        .job {
            color: #fff;
            font-weight: 500;
        }

        .section-header {
            background: #2a2a2a;
            font-weight: 600;
            color: #fff;
            cursor: pointer;
            user-select: none;
        }

        .section-header:hover {
            background: #333;
        }

        .section-header:focus {
            outline: 2px solid #4fc3f7;
            outline-offset: -2px;
        }

        .section-header td {
            padding: 0.75rem 1rem;
            border-bottom: 2px solid #333;
            position: relative;
        }

        .section-header td::before {
            content: '‚ñº';
            margin-right: 0.5rem;
            font-size: 0.75rem;
            transition: transform 0.2s;
            display: inline-block;
        }

        .section-header.collapsed td::before {
            transform: rotate(-90deg);
        }

        .section-row {
            transition: opacity 0.2s;
        }

        .section-row.hidden {
            display: none;
        }

        footer {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #333;
            color: #666;
            font-size: 0.85rem;
        }

        .warning {
            background: #3a2a1a;
            border-left: 4px solid #ff9800;
            padding: 1rem;
            margin-bottom: 2rem;
            border-radius: 4px;
        }

        .warning-title {
            color: #ff9800;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .keyboard-hint {
            background: #2a2a2a;
            border-left: 4px solid #4fc3f7;
            padding: 1rem;
            margin-bottom: 2rem;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .keyboard-hint-title {
            color: #4fc3f7;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Carbon ACX - Command Reference</h1>
        <p class="subtitle">Quick reference for common development tasks</p>
        <p class="last-updated">Last updated: 2025-10-31</p>
        </div>

        <div class="warning">
            <div class="warning-title">‚ö†Ô∏è Local Use Only</div>
            This page is for local development reference. Click any command to copy it to clipboard.
        </div>

        <table>
            <thead>
                <tr>
                    <th>Job</th>
                    <th>Command</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <!-- Setup -->
                <tr class="section-header" data-section="setup" tabindex="0">
                    <td colspan="3">Setup & Installation</td>
                </tr>
                <tr class="section-row" data-section="setup">
                    <td class="job">Install dependencies</td>
                    <td><code class="command">pnpm install</code></td>
                    <td class="description">Install all package dependencies</td>
                </tr>

                <!-- Development -->
                <tr class="section-header collapsed" data-section="dev" tabindex="0">
                    <td colspan="3">Development</td>
                </tr>
                <tr class="section-row hidden" data-section="dev">
                    <td class="job">Start dev server</td>
                    <td><code class="command">pnpm dev</code></td>
                    <td class="description">Start development server with hot reload</td>
                </tr>
                <tr class="section-row hidden" data-section="dev">
                    <td class="job">Start web app dev</td>
                    <td><code class="command">pnpm --filter carbon-acx-web dev</code></td>
                    <td class="description">Start web app development server only</td>
                </tr>
                <tr class="section-row hidden" data-section="dev">
                    <td class="job">Generate schema</td>
                    <td><code class="command">pnpm schema:gen</code></td>
                    <td class="description">Generate TypeScript types from semantic model</td>
                </tr>

                <!-- Build -->
                <tr class="section-header collapsed" data-section="build" tabindex="0">
                    <td colspan="3">Build & Deploy</td>
                </tr>
                <tr class="section-row hidden" data-section="build">
                    <td class="job">Build for production</td>
                    <td><code class="command">pnpm build</code></td>
                    <td class="description">Build all packages for production</td>
                </tr>
                <tr class="section-row hidden" data-section="build">
                    <td class="job">Build web app</td>
                    <td><code class="command">pnpm --filter carbon-acx-web build</code></td>
                    <td class="description">Build web application only</td>
                </tr>
                <tr class="section-row hidden" data-section="build">
                    <td class="job">Prebuild web</td>
                    <td><code class="command">pnpm prebuild:web</code></td>
                    <td class="description">Run prebuild tasks for web app</td>
                </tr>

                <!-- Testing -->
                <tr class="section-header collapsed" data-section="testing" tabindex="0">
                    <td colspan="3">Testing & Quality</td>
                </tr>
                <tr class="section-row hidden" data-section="testing">
                    <td class="job">Run tests</td>
                    <td><code class="command">pnpm test</code></td>
                    <td class="description">Run all test suites</td>
                </tr>
                <tr class="section-row hidden" data-section="testing">
                    <td class="job">Type check</td>
                    <td><code class="command">pnpm typecheck</code></td>
                    <td class="description">Run TypeScript type checking</td>
                </tr>
                <tr class="section-row hidden" data-section="testing">
                    <td class="job">Lint code</td>
                    <td><code class="command">pnpm lint</code></td>
                    <td class="description">Run ESLint on codebase</td>
                </tr>
                <tr class="section-row hidden" data-section="testing">
                    <td class="job">Format code</td>
                    <td><code class="command">pnpm format</code></td>
                    <td class="description">Format code with Prettier</td>
                </tr>

                <!-- Git -->
                <tr class="section-header collapsed" data-section="git" tabindex="0">
                    <td colspan="3">Git Operations</td>
                </tr>
                <tr class="section-row hidden" data-section="git">
                    <td class="job">Check status</td>
                    <td><code class="command">git status</code></td>
                    <td class="description">View current branch and changed files</td>
                </tr>
                <tr class="section-row hidden" data-section="git">
                    <td class="job">View diff</td>
                    <td><code class="command">git diff</code></td>
                    <td class="description">See unstaged changes</td>
                </tr>
                <tr class="section-row hidden" data-section="git">
                    <td class="job">View recent commits</td>
                    <td><code class="command">git log --oneline -10</code></td>
                    <td class="description">Show last 10 commits</td>
                </tr>
                <tr class="section-row hidden" data-section="git">
                    <td class="job">Pull latest</td>
                    <td><code class="command">git pull origin main</code></td>
                    <td class="description">Fetch and merge latest changes</td>
                </tr>

                <!-- Package Management -->
                <tr class="section-header collapsed" data-section="packages" tabindex="0">
                    <td colspan="3">Package Management</td>
                </tr>
                <tr class="section-row hidden" data-section="packages">
                    <td class="job">Add dependency</td>
                    <td><code class="command">pnpm add package-name</code></td>
                    <td class="description">Add a new package dependency</td>
                </tr>
                <tr class="section-row hidden" data-section="packages">
                    <td class="job">Add dev dependency</td>
                    <td><code class="command">pnpm add -D package-name</code></td>
                    <td class="description">Add a development dependency</td>
                </tr>
                <tr class="section-row hidden" data-section="packages">
                    <td class="job">Update dependencies</td>
                    <td><code class="command">pnpm update</code></td>
                    <td class="description">Update all dependencies to latest compatible versions</td>
                </tr>
                <tr class="section-row hidden" data-section="packages">
                    <td class="job">List outdated</td>
                    <td><code class="command">pnpm outdated</code></td>
                    <td class="description">Check for outdated packages</td>
                </tr>

                <!-- Diagnostics -->
                <tr class="section-header collapsed" data-section="diagnostics" tabindex="0">
                    <td colspan="3">Diagnostics</td>
                </tr>
                <tr class="section-row hidden" data-section="diagnostics">
                    <td class="job">Check Node version</td>
                    <td><code class="command">node --version</code></td>
                    <td class="description">Verify Node.js version</td>
                </tr>
                <tr class="section-row hidden" data-section="diagnostics">
                    <td class="job">Check pnpm version</td>
                    <td><code class="command">pnpm --version</code></td>
                    <td class="description">Verify pnpm version</td>
                </tr>
                <tr class="section-row hidden" data-section="diagnostics">
                    <td class="job">List workspaces</td>
                    <td><code class="command">pnpm list --depth 0</code></td>
                    <td class="description">Show all workspace packages</td>
                </tr>

                <!-- Documentation -->
                <tr class="section-header collapsed" data-section="docs" tabindex="0">
                    <td colspan="3">Documentation</td>
                </tr>
                <tr class="section-row hidden" data-section="docs">
                    <td class="job">Update this page</td>
                    <td><code class="command">./scripts/update-commands-page.sh</code></td>
                    <td class="description">Regenerate this command reference page</td>
                </tr>
            </tbody>
        </table>

        <footer>
            <p><strong>Note:</strong> This is a local reference page. Commands are safe to run in your development environment.</p>
            <p>Generated for: <strong>carbon-acx</strong> | Location: <code>~/dev/carbon-acx</code></p>
        <p style="margin-top: 1rem;">‚å®Ô∏è <strong>Keyboard Navigation:</strong> Use <strong>‚Üë‚Üì</strong> to navigate sections, <strong>‚Üí</strong> to expand, <strong>‚Üê</strong> to collapse, <strong>Space/Enter</strong> to toggle, <strong>Cmd+Click</strong> to collapse all others.</p>
        </footer>
    </div>

    <script>
        // Click-to-copy functionality
        document.querySelectorAll('.command').forEach(cmd => {
            cmd.addEventListener('click', async function() {
                const text = this.textContent.replace('üìã', '').trim();
                try {
                    await navigator.clipboard.writeText(text);
                    this.classList.add('copied');
                    setTimeout(() => this.classList.remove('copied'), 300);
                } catch (err) {
                    // Fallback for older browsers
                    const textarea = document.createElement('textarea');
                    textarea.value = text;
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textarea);
                    this.classList.add('copied');
                    setTimeout(() => this.classList.remove('copied'), 300);
                }
            });
        });

        // Section toggle functionality
        const sectionHeaders = document.querySelectorAll('.section-header');

        function toggleSection(header, collapseOthers = false) {
            const section = header.dataset.section;
            const isCollapsed = header.classList.contains('collapsed');

            if (collapseOthers) {
                // Collapse all other sections
                sectionHeaders.forEach(h => {
                    if (h !== header) {
                        h.classList.add('collapsed');
                        document.querySelectorAll(`.section-row[data-section="${h.dataset.section}"]`)
                            .forEach(row => row.classList.add('hidden'));
                    }
                });
            }

            // Toggle current section
            header.classList.toggle('collapsed');
            const rows = document.querySelectorAll(`.section-row[data-section="${section}"]`);
            rows.forEach(row => {
                row.classList.toggle('hidden');
            });
        }

        // Click to toggle
        sectionHeaders.forEach(header => {
            header.addEventListener('click', (e) => {
                toggleSection(header, e.metaKey || e.ctrlKey);
            });
        });

        // Keyboard navigation
        let currentHeaderIndex = -1;
        const headerArray = Array.from(sectionHeaders);

        function focusHeader(index) {
            if (index >= 0 && index < headerArray.length) {
                currentHeaderIndex = index;
                headerArray[index].focus();
                headerArray[index].scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }

        document.addEventListener('keydown', (e) => {
            // Only handle if we're not in an input field
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                return;
            }

            // Find currently focused header
            const focusedHeader = document.activeElement;
            if (focusedHeader && focusedHeader.classList.contains('section-header')) {
                currentHeaderIndex = headerArray.indexOf(focusedHeader);
            }

            switch(e.key) {
                case 'ArrowDown':
                    e.preventDefault();
                    if (currentHeaderIndex < headerArray.length - 1) {
                        focusHeader(currentHeaderIndex + 1);
                    } else if (currentHeaderIndex === -1 && headerArray.length > 0) {
                        focusHeader(0);
                    }
                    break;

                case 'ArrowUp':
                    e.preventDefault();
                    if (currentHeaderIndex > 0) {
                        focusHeader(currentHeaderIndex - 1);
                    } else if (currentHeaderIndex === -1 && headerArray.length > 0) {
                        focusHeader(headerArray.length - 1);
                    }
                    break;

                case 'ArrowRight':
                    // Expand current section
                    if (focusedHeader && focusedHeader.classList.contains('section-header')) {
                        e.preventDefault();
                        if (focusedHeader.classList.contains('collapsed')) {
                            toggleSection(focusedHeader);
                        }
                    }
                    break;

                case 'ArrowLeft':
                    // Collapse current section
                    if (focusedHeader && focusedHeader.classList.contains('section-header')) {
                        e.preventDefault();
                        if (!focusedHeader.classList.contains('collapsed')) {
                            toggleSection(focusedHeader);
                        }
                    }
                    break;

                case ' ':
                case 'Enter':
                    if (focusedHeader && focusedHeader.classList.contains('section-header')) {
                        e.preventDefault();
                        toggleSection(focusedHeader, e.metaKey || e.ctrlKey);
                    }
                    break;
            }
        });

        // Focus first section on page load for immediate keyboard nav
        if (headerArray.length > 0) {
            headerArray[0].focus();
            currentHeaderIndex = 0;
        }
    </script>
</body>
</html>
